/*! tabby 2015-03-05 */
function setAuth(){chrome.storage.local.set({auth:authCode})}var url=window.location.href,code=document.getElementById("code"),authCode=window.location.href.split("#")[1].split("=")[1];setAuth();var CLIENT_ID="aea095af73ba40429e47bf90a278b251",url="https://instagram.com/oauth/authorize/?client_id="+CLIENT_ID+"&redirect_uri="+window.location.origin+"/src/auth/finished.html&response_type=token&scope=likes+relationships",authLink=document.getElementById("authLink").href=url;chrome.storage.local.get("auth",function(a){console.log(a.auth)}),chrome.extension.sendMessage({},function(){var a=setInterval(function(){"complete"===document.readyState&&(clearInterval(a),console.log("Hello. This message was sent from scripts/inject.js"))},10)});var CLIENT_ID="aea095af73ba40429e47bf90a278b251",url="https://instagram.com/oauth/authorize/?client_id="+CLIENT_ID+"&redirect_uri="+window.location.origin+"/src/auth/finished.html&response_type=token&scope=likes+relationships";$("#authLink").attr("href",url);var authCode=!1;chrome.storage.local.get("auth",function(a){authCode=a.auth,""!==authCode?$("#loggedOut").addClass("hidden"):$("#loggedIn").addClass("hidden")}),$("#disconnect").click(function(){chrome.storage.local.set({auth:""}),authCode="",$("#disconnected").removeClass("hidden"),$("#loggedIn").addClass("hidden")});var CLIENT_ID="aea095af73ba40429e47bf90a278b251",app=chrome.runtime.getManifest(),authCode="";chrome.storage.local.get("auth",function(a){authCode=a.auth});var _log=function(a){"object"!=typeof a&&$(".log").text(a)},showAuthButton=function(){var a="https://instagram.com/oauth/authorize/?client_id="+CLIENT_ID+"&redirect_uri="+window.location.origin+"/src/auth/finished.html&response_type=token&scope=likes+relationships";$("#authLink").attr("href",a),$(".auth-button").removeClass("hidden")},getAuth=function(){0!==authCode.length?($(".auth-button").addClass("hidden"),getInstagramFeed(),0!==$(".first-row").text().length&&(_log("clearing auth interval"),window.clearInterval(authInterval))):(console.log("...showing auth button..."),showAuthButton())},getInstagramFeed=function(){var a="https://api.instagram.com/v1/users/self/feed";$.ajax({url:a,data:{access_token:authCode},success:function(a){displayFeed(a)},dataType:"jsonp"})},displayFeed=function(a){if($(".first-row").text().length>5)return _log("clearing auth interval"),void window.clearInterval(authInterval);for(var b=0;8>b;b++)if("image"===a.data[b].type){var c=a.data[b],d=c.images.standard_resolution.url,e=c.user.username,f=$("<div class='photo'></div>"),g=$("<img src='"+d+"'>"),h=$("<span class='username'>"+e+"</span>");f.append(h).append(g),4>b?($(".first-row").append(f),console.log("adding to first row")):($(".second-row").append(f),console.log("adding to 2nd row"))}},authInterval="",runInterval=function(){authInterval=window.setInterval(getAuth,500)};$(document).ready(function(){runInterval()});